How to run service:

0) Make sure that ingress addon is enabled
minikube addons enable ingress

1) Create namespace "myapp"
kubectl create namespace myapp
kubectl config set-context --current --namespace=myapp

2) Deploy db
cd postgres && kubectl apply -f postgres-deployment.yaml

3) Migrate when postgres-pod will be ready
kubectl apply -f initdb.yaml

4) Deploy api-gateway
cd ../auth-app && helm install auth-app ./auth-app-chart --atomic
...
kubectl apply -f auth_app_ingress.yaml

5) Deploy app
cd ../app && helm install app ./app-chart --atomic
...
kubectl apply -f app_ingress.yaml

6) Redis
cd ../redis && kubectl apply -f redis-deployment.yaml

7) Orchestrator
cd ../orchestrator && helm install orchestrator ./orchestrator-chart --atomic

8) Order service
cd ../order-service && helm install order ./order-chart --atomic

---------------------------------------------------
Run tests:
newman run Idempotency.postman_collection.json
----------------------------------------------------
Я реализую идемпотентность через state элементов.
Если у пользователя есть хотя бы один открытый заказ, то при открытии нового
все старые заказы помечаются как closed.